# Realtime Item Tracker

This project provides a Next.js dashboard for scanning inbound order sheets, reconciling them against bookings, and visualising locations on interactive floor maps.

## Prerequisites
- **Node.js:** Use the active LTS release defined in [`.nvmrc`](./.nvmrc) (`>=20.18.0 <21`). The same string is mirrored in [`.node-version`](./.node-version) for asdf users and the `"engines"` field in [`package.json`](./package.json).
- **Python:** A Python 3 runtime is required for the OCR and barcode helper scripts. The default binaries can be overridden via environment variables in `.env`.

## Getting started on a new machine
1. **Install dependencies deterministically.** Run `npm ci` to honour the committed [`package-lock.json`](./package-lock.json).
2. **Configure environment variables.** Copy [`.env.example`](./.env.example) to `.env.local` (or your preferred local override) and fill in any secrets such as `API_KEY` and VLM endpoints.
3. **Bootstrap local data.** Execute `npm run bootstrap` to regenerate `data/app.db`, seed demo bookings/history, and copy the canonical map fixtures from [`fixtures/maps`](./fixtures/maps) into `data/maps/`.
4. **Validate the build.** Run `npm run build` followed by `npm run lint` to confirm the Next.js project compiles and passes linting.
5. **Start developing.** Launch `npm run dev` for the development server.

## Environment reference
All runtime configuration lives in environment variables; see [`.env.example`](./.env.example) for the full list. Key values include:
- `API_KEY` – shared secret consumed by the Edge middleware.
- `PYTHON_BIN` / `OCR_PYTHON` – point to the Python interpreter that exposes the OCR and barcode scripts under `scripts/`.
- `OCR_LOCAL_*` – control the optional local VLM HTTP bridge.
- `BARCODE_TIMEOUT_MS` and `BARCODE_MATCH_TIMEOUT_MS` – tune the barcode service worker timeouts.

## Data directories
- `data/app.db` – SQLite database generated by the application and rebuilt by `npm run bootstrap`.
- `data/maps/` – Uploaded floor maps. The bootstrap script copies the committed fixtures here so the admin UI always has sample content.
- `uploads/`, `tmp/`, and `output/` – Ephemeral OCR artefacts excluded from Git.

## Operational checks
After running the bootstrap and build steps, walk through the manual QA guide in [`docs/map-testing.md`](./docs/map-testing.md). It covers the scanner dashboard scenarios and validates that seeded floor maps render correctly.

